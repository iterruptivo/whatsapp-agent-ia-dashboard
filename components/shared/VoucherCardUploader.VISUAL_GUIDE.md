# Guia Visual: VoucherCardUploader.tsx

**Fecha:** 2 Enero 2026
**Componente:** VoucherCardUploader
**UX Level:** Mundial / Premium

---

## Estado Inicial (Sin Vouchers)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ต Comprobantes de Pago         [Opcional]                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                              โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ                      โฌ๏ธ                               โ  โ
โ  โ          Arrastra un comprobante o haz clic          โ  โ
โ  โ          Formatos: JPG, PNG, PDF                     โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                                              โ
โ  Vouchers: 0/10                                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**Caracteristicas:**
- Header con icono DollarSign verde (#1b967a)
- Badge "Opcional" gris
- Dropzone con borde punteado
- Contador de vouchers

---

## Estado: Subiendo Archivo

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ต Comprobantes de Pago         [Opcional]                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ โโโโโโโโโโ  VOUCHER #1                        ๐๏ธ     โ โ
โ  โ โ        โ  โณ Subiendo...                            โ โ
โ  โ โ [img]  โ  Cargando datos...                        โ โ
โ  โ โ        โ                                            โ โ
โ  โ โโโโโโโโโโ                                             โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                                              โ
โ  Vouchers: 1/10                                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**Caracteristicas:**
- Preview de imagen (24x28px)
- Estado "Subiendo..." con Loader2 animado
- Icono de trash para eliminar
- Borde azul (border-blue-400)

---

## Estado: Procesando OCR

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ต Comprobantes de Pago         [Opcional]                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ โโโโโโโโโโ  VOUCHER #1                        ๐๏ธ     โ โ
โ  โ โ        โ  ๐ Procesando OCR...                      โ โ
โ  โ โ [img]  โ  Extrayendo datos del voucher...          โ โ
โ  โ โ        โ                                            โ โ
โ  โ โโโโโโโโโโ                                             โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                                              โ
โ  Vouchers: 1/10                                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**Caracteristicas:**
- Loader2 amarillo animado
- Mensaje "Procesando OCR..."
- Borde amarillo (border-yellow-400)

---

## Estado: OCR Exitoso - Alta Confianza (>= 80%)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ต Comprobantes de Pago         [Opcional]                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ  Resumen:  S/ 5,000.00   USD 2,000.00                       โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                                                      โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ โโโโโโโโโโ  VOUCHER #1                              ๐๏ธ     โ   โ
โ  โ โ        โ  โ Validado                                     โ   โ
โ  โ โ [img]  โ                                                  โ   โ
โ  โ โ  BCP   โ  ๐ต Monto: PEN 5,000.00                         โ   โ
โ  โ โโโโโโโโโโ  ๐ฆ Banco: BCP                                   โ   โ
โ  โ             #๏ธโฃ Operacion: 001234567890                      โ   โ
โ  โ             ๐ Fecha: 02/01/2026                            โ   โ
โ  โ             ๐ค Depositante: Juan Perez                      โ   โ
โ  โ                                                              โ   โ
โ  โ             ๐ Confianza: 92%                               โ   โ
โ  โ             โโโโโโโโโโโโโโโโโโโโโโ 92%                      โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                                                                      โ
โ  Vouchers: 1/10                                                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**Caracteristicas:**
- **Panel de Resumen** con totales PEN + USD (gradient green-blue)
- Preview de imagen
- Badge "โ Validado" verde
- Todos los datos extraidos con iconos:
  - ๐ต Monto (DollarSign)
  - ๐ฆ Banco (Building2)
  - #๏ธโฃ Operacion (Hash)
  - ๐ Fecha (Calendar)
  - ๐ค Depositante (User)
- **Barra de confianza** verde (92%)
- Borde verde (border-green-500)

---

## Estado: OCR con Baja Confianza (< 80%)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ต Comprobantes de Pago         [Opcional]                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ  Resumen:  S/ 1,500.00                                       โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                                                      โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ โโโโโโโโโโ  VOUCHER #1                              ๐๏ธ     โ   โ
โ  โ โ        โ  โ๏ธ Revisar                                      โ   โ
โ  โ โ [img]  โ                                                  โ   โ
โ  โ โInterbnkโ  ๐ต Monto: PEN 1,500.00                         โ   โ
โ  โ โโโโโโโโโโ  ๐ฆ Banco: Interbank                             โ   โ
โ  โ             #๏ธโฃ Operacion: 987654321                         โ   โ
โ  โ             ๐ Fecha: 01/01/2026                            โ   โ
โ  โ                                                              โ   โ
โ  โ             ๐ Confianza: 65%                               โ   โ
โ  โ             โโโโโโโโโโโโโโโโโโโโ 65%                        โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                                                                      โ
โ  Vouchers: 1/10                                                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**Caracteristicas:**
- Badge "โ๏ธ Revisar" amarillo
- Barra de confianza amarilla (65%)
- Borde amarillo (border-yellow-500)
- Datos parciales (algunos pueden faltar)

---

## Estado: Multiple Vouchers

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ต Comprobantes de Pago         [Opcional]                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ  Resumen:  S/ 12,500.00   USD 3,500.00                       โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                                                       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ [img] VOUCHER #1  โ Validado                        ๐๏ธ     โ   โ
โ  โ PEN 5,000.00 | BCP | Op: 123456 | 02/01/26                   โ   โ
โ  โ Confianza: โโโโโโโโโโโโโโโโโโโโโโ 92%                        โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                                                                       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ [img] VOUCHER #2  โ Validado                        ๐๏ธ     โ   โ
โ  โ PEN 7,500.00 | BBVA | Op: 789012 | 01/01/26                  โ   โ
โ  โ Confianza: โโโโโโโโโโโโโโโโโโโโโโ 88%                        โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                                                                       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ [img] VOUCHER #3  โ Validado                        ๐๏ธ     โ   โ
โ  โ USD 3,500.00 | BCP | Op: 345678 | 02/01/26                   โ   โ
โ  โ Confianza: โโโโโโโโโโโโโโโโโโโโโโ 95%                        โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                                                                       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ  + Agregar comprobante                                       โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                                                                       โ
โ  Vouchers: 3/10                                                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**Caracteristicas:**
- **Panel de Resumen** actualizado automaticamente
- Suma PEN: S/ 12,500.00 (5,000 + 7,500)
- Suma USD: $ 3,500.00
- Cada voucher es una card independiente
- Cada voucher tiene sus propios datos OCR
- Dropzone sigue disponible (max 10)

---

## Estado: Error en OCR

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ต Comprobantes de Pago         [Opcional]                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ โโโโโโโโโโ  VOUCHER #1                        ๐๏ธ     โ โ
โ  โ โ        โ  โ Error                                  โ โ
โ  โ โ [img]  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ โ
โ  โ โ  ???   โ  โ Error procesando voucher            โ  โ โ
โ  โ โโโโโโโโโโ  โ No se pudo extraer datos del OCR    โ  โ โ
โ  โ             โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                                              โ
โ  Vouchers: 1/10                                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**Caracteristicas:**
- Badge "โ Error" rojo
- Panel de error con mensaje
- Borde rojo (border-red-500)
- Opcion de eliminar y reintentar

---

## Responsive Design

### Desktop (> 768px)
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Header                                  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ Resumen: S/ 5,000.00  USD 2,000    โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                          โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ [img] VOUCHER #1  โ     ๐๏ธ      โ   โ
โ  โ Datos completos con iconos       โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                                          โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ  + Agregar                       โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### Mobile (< 768px)
```
โโโโโโโโโโโโโโโโโโโโโโ
โ  Header            โ
โ  โโโโโโโโโโโโโโโโ โ
โ  โ Resumen:     โ โ
โ  โ S/ 5,000.00  โ โ
โ  โโโโโโโโโโโโโโโโ โ
โ                    โ
โ  โโโโโโโโโโโโโโโโ โ
โ  โ [img]        โ โ
โ  โ VOUCHER #1   โ โ
โ  โ โ Validado  โ โ
โ  โ PEN 5,000    โ โ
โ  โ BCP          โ โ
โ  โ ๐๏ธ           โ โ
โ  โโโโโโโโโโโโโโโโ โ
โ                    โ
โ  โโโโโโโโโโโโโโโโ โ
โ  โ + Agregar    โ โ
โ  โโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโ
```

---

## Paleta de Colores

### Colores Corporativos
```css
/* Verde Primario */
#1b967a   โ Iconos principales, hover, totales PEN

/* Azul Navy */
#192c4d   โ Headings, texto importante

/* Amarillo */
#fbde17   โ Alertas (reservado)
```

### Estados
```css
/* Valido */
border-green-500, bg-green-50, text-green-600

/* Revision */
border-yellow-500, bg-yellow-50, text-yellow-600

/* Error */
border-red-500, bg-red-50, text-red-600

/* Procesando */
border-blue-400, bg-blue-50, text-blue-600
```

---

## Animaciones

### Loader (Subiendo/Procesando)
```tsx
<Loader2 className="w-3 h-3 animate-spin" />
```

### Hover en Dropzone
```css
transition-all
hover:border-gray-400
```

### Barra de Confianza
```css
transition-all
/* Crece animadamente hasta el % de confianza */
```

---

## Iconografia (Lucide React)

| Dato | Icono | Color |
|------|-------|-------|
| Monto | DollarSign | #1b967a (verde) |
| Banco | Building2 | Blue |
| Operacion | Hash | Purple |
| Fecha | Calendar | Orange |
| Depositante | User | Indigo |
| Confianza | TrendingUp | Gray |
| Eliminar | Trash2 | Red |
| Upload | Upload | Gray |
| Validado | CheckCircle | Green |
| Revisar | AlertTriangle | Yellow |
| Error | XCircle | Red |

---

## Interacciones

### Drag & Drop
1. Usuario arrastra archivo sobre dropzone
2. Borde cambia a verde (#1b967a)
3. Fondo cambia a bg-green-50
4. Al soltar, inicia procesamiento

### Click para Seleccionar
1. Usuario hace click en dropzone
2. Abre selector de archivos del SO
3. Puede seleccionar multiple archivos
4. Procesa cada uno secuencialmente

### Eliminar Voucher
1. Usuario hace click en icono Trash2
2. Voucher se elimina de la lista
3. Totales se recalculan automaticamente
4. onVouchersChange() notifica al padre

---

## Flujo de Datos

```
โโโโโโโโโโโโโโโ
โ   Usuario   โ
โ  Sube File  โ
โโโโโโโโฌโโโโโโโ
       โ
       v
โโโโโโโโโโโโโโโโโโโโโโโโ
โ  VoucherCardUploader โ
โ  processFile()       โ
โโโโโโโโฌโโโโโโโโโโโโโโโโ
       โ
       v
โโโโโโโโโโโโโโโโโโโโโโโโ
โ  Supabase Storage    โ โ Guarda imagen
โ  uploadToStorage()   โ
โโโโโโโโฌโโโโโโโโโโโโโโโโ
       โ
       v
โโโโโโโโโโโโโโโโโโโโโโโโ
โ  API /ocr/extract    โ โ GPT-4 Vision OCR
โ  type: 'voucher'     โ
โโโโโโโโฌโโโโโโโโโโโโโโโโ
       โ
       v
โโโโโโโโโโโโโโโโโโโโโโโโ
โ  VoucherOCRData      โ โ Datos extraidos
โ  confianza: 92%      โ
โโโโโโโโฌโโโโโโโโโโโโโโโโ
       โ
       v
โโโโโโโโโโโโโโโโโโโโโโโโ
โ  VoucherCard UI      โ โ Renderiza card
โ  estado: 'valido'    โ
โโโโโโโโฌโโโโโโโโโโโโโโโโ
       โ
       v
โโโโโโโโโโโโโโโโโโโโโโโโ
โ  onVouchersChange()  โ โ Notifica al padre
โ  Array<VoucherItem>  โ
โโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## Performance

### Compresion de Imagenes
```javascript
async function compressImage(file: File, maxWidth = 1920, quality = 0.8)
```
- Redimensiona a max 1920px
- Comprime a JPEG quality 80%
- Reduce tamano promedio en 70%

### Async/Await
- Proceso no bloquea UI
- Usuario puede seguir interactuando
- Multiples uploads en paralelo

---

## Conclusion

El componente **VoucherCardUploader** ofrece una experiencia de usuario de **clase mundial**:

โ **Visual Premium** - Colores corporativos, iconografia clara, animaciones suaves
โ **Feedback Continuo** - Usuario siempre sabe el estado de cada voucher
โ **Datos Transparentes** - OCR visible, barra de confianza, totales automรกticos
โ **Responsive** - Funciona perfecto en mobile y desktop
โ **Performance** - Compresion, async, no bloquea UI

**Listo para produccion.**

---

**Documento generado por:** Frontend Developer Agent
**Fecha:** 2 Enero 2026
